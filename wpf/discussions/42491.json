[
  {
    "Id": "141234",
    "ThreadId": "42491",
    "Html": "The sorting is set in xaml: <br>\r\n&lt;<span style=\"font-size:13px;color:#a31515\">wpftoolkit</span><span style=\"font-size:13px;color:#0000ff\">:</span><span style=\"font-size:13px;color:#a31515\">DataGrid.Columns</span><span style=\"font-size:13px;color:#0000ff\">&gt;<br>\r\n<span style=\"font-size:13px;color:#0000ff\">    &lt;</span><span style=\"font-size:13px;color:#a31515\">wpftoolkit</span><span style=\"font-size:13px;color:#0000ff\">:</span><span style=\"font-size:13px;color:#a31515\">DataGridTextColumn</span><span style=\"font-size:13px;color:#ff0000\"> <br>\r\n                        Header</span><span style=\"font-size:13px;color:#0000ff\">=&quot;{</span><span style=\"font-size:13px;color:#a31515\">StaticResource</span><span style=\"font-size:13px;color:#ff0000\"> strQueueHeaderCreatedOn</span><span style=\"font-size:13px;color:#0000ff\">}&quot;</span><span style=\"font-size:13px\"> <br>\r\n</span><span style=\"font-size:13px;color:#ff0000\">                        SortDirection</span><span style=\"font-size:13px;color:#0000ff\">=&quot;Ascending&quot; </span><span style=\"font-size:13px;color:#0000ff\">/&gt;<br>\r\n<span style=\"font-size:13px;color:#0000ff\">&lt;/</span><span style=\"font-size:13px;color:#a31515\">wpftoolkit</span><span style=\"font-size:13px;color:#0000ff\">:</span><span style=\"font-size:13px;color:#a31515\">DataGrid.Columns</span><span style=\"font-size:13px;color:#0000ff\">&gt;<br>\r\n</span></span></span><br>\r\nThe ItemSource is a simple binding to a dependency property ObservableCollection. &quot;OC&quot;<br>\r\n<br>\r\nThe problem scenario:<br>\r\n1 - Assign an empty OC to the dependency property<br>\r\n2 - Assign an filled OC to the dependeny property<br>\r\n<br>\r\nThe default sort is not being applied as would be expected. If you skip step 1 and assign a filled OC then the default sorting will be correctly applied. Apparently the sort descriptors are only applied on the first assigned itemsource. (edit: this was wrong, found out later that my first list was sorted by chance. No sort is ever done by setting this property)<br>\r\n<br>\r\nMy workaround was to assign the empty OC and then manage the list with 'clear' and 'add'. However, that didnt work either. If you assign an empty OC as ItemSource then the sortdescriptors are also not correctly applied.<br>\r\n<br>\r\nGiven these two problems, i'll dive into the WPFToolkit sorting and make it refresh descriptors on ItemSource changes.<br>\r\n<br>\r\nAnyone else having these issues and a non code solution?\r\n",
    "PostedDate": "2008-12-16T23:42:32.777-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "141260",
    "ThreadId": "42491",
    "Html": "In DataGrid.cs the following code can be found:<br>\r\n<p>&nbsp;</p>\r\n/// &lt;summary&gt;<br>\r\n///     Coercion callback for ItemsSource property<br>\r\n/// &lt;/summary&gt;<br>\r\n/// &lt;remarks&gt;<br>\r\n///     SortDescriptions and GroupDescriptions are supposed to be<br>\r\n///     cleared in PropertyChangedCallback or OnItemsSourceChanged<br>\r\n///     virtual. But it seems that the SortDescriptions are applied<br>\r\n///     to the new CollectionView due to new ItemsSource in <br>\r\n///     PropertyChangedCallback of base class (which would execute<br>\r\n///     before PropertyChangedCallback of this class) and before calling<br>\r\n///     OnItemsSourceChanged virtual. Hence handling it in Coercion callback.<br>\r\n/// &lt;/remarks&gt;<br>\r\nprivate static object OnCoerceItemsSourceProperty(DependencyObject d, object baseValue)<br>\r\n{<br>\r\n      DataGrid dataGrid = (DataGrid)d;<br>\r\n      if (baseValue != dataGrid._cachedItemsSource &amp;&amp; dataGrid._cachedItemsSource != null)<br>\r\n      {<br>\r\n              dataGrid.Items.SortDescriptions.Clear();<br>\r\n              dataGrid.Items.GroupDescriptions.Clear();<br>\r\n      }<br>\r\n      return baseValue;<br>\r\n}<br>\r\n<br>\r\nRemoving this code, fixes the issue of the sort not being re-applied. I understand the reason behind the need to remove sort descriptore when the ItemSource points to a different datatype where they would not work. But i would consider that a special case instead of removing this default sorting behavior. Perhaps make a property on datagrid that 'RemoveSortDescriptorsOnItemSourceChanged' or similar. Then modify the above code to lookup the desired behavior instead of the current implementation.<br>\r\n<br>\r\nMy datagrids are always showing the same data, but in master detail views switching of item sources is a must.<br>\r\n<br>\r\nIm still looking into the first problem, where the column default sort descriptors are not applied \r\n",
    "PostedDate": "2008-12-17T01:51:32.82-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "141305",
    "ThreadId": "42491",
    "Html": "Apparently doing SortDirection=&quot;Ascending&quot; on the DataGridTextColumn has no effect except styling. This is as far as i can see not implemented yet. Please proof me wrong, but i have now fixed it by using a CollectionViewSource and putting the sort description there.<br>\r\n<br>\r\n&lt;CollectionViewSource&gt;<br>\r\n    &lt;CollectionViewSource.SortDescriptions&gt;<br>\r\n         &lt;scm:SortDescription PropertyName=&quot;CreatedOn&quot; Direction=&quot;Ascending&quot; /&gt;<br>\r\n    &lt;/CollectionViewSource.SortDescriptions&gt;<br>\r\n&lt;/CollectionViewSource&gt;<br>\r\n<br>\r\nThis will do the actual sorting, and the SortDirection=&quot;Ascending&quot; on the DataGridTextColumn will apply the correct style to indicate the sort state of the column to the user.<br>\r\n<br>\r\nPreferred way of doing this would be to have the datagrid apply the SortDirection, the first time the ItemSource is changed. Implementation could take place in the OnCoerceItemsSourceProperty when the 'dataGrid._cachedItemsSource' is null.<br>\r\n<br>\r\nI have it 'working' but i would really like to see more support in the base code for sorting. <br>\r\n<br>\r\nThanks for reading my ramblings,<br>\r\n  Jan Izaak Oosthoek.<br>\r\n<br>\r\n",
    "PostedDate": "2008-12-17T05:25:04.1-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]