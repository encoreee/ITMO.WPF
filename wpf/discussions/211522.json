[
  {
    "Id": "438827",
    "ThreadId": "211522",
    "Html": "<p>I've written an application making use of WPF Toolkit charts.&nbsp; I've got a timer that updates the charts every so often.&nbsp; After my app runs for a while I noticed that it's consuming a bunch of memory.&nbsp; After taking a couple of process dumps (via adplus.vbs) I believe the problem is that all of my charts which I think I'm no longer using are still being referenced.&nbsp; Maybe I'm doing something wrong and not releasing them correctly, but my initial guess would be that I am releasing them correct.&nbsp; Basically I've got a content control and when my periodic timer goes off I create a new chart and set my content's control Content property to the new chart.&nbsp; This is all that I should need to do, correct?&nbsp; Below is a code snippet:</p>\r\n<p>.<br>.<br>.<br>Chart chart = new Chart();<br>chart.HorizontalAlignment = System.Windows.HorizontalAlignment.Stretch;<br>chart.VerticalAlignment = System.Windows.VerticalAlignment.Stretch;<br>this.Content = chart;<br>.<br>.<br>.</p>\r\n<p>Here is an output from !gcroot indicating what's holding onto the no longer needed charts:</p>\r\n<p>0:000&gt; !gcroot -nostacks 01786bd0<br>DOMAIN(0015D200):HANDLE(Strong):911150:Root:012c17c0(System.Threading._TimerCallback)-&gt;<br>012c1778(System.Threading.TimerCallback)-&gt;<br>012a7274(Framework.SystemsManagement.Instrumentation.Console.Console)-&gt;<br>013a52f8(Framework.SystemsManagement.Instrumentation.Console.Console+Refresh)-&gt;<br>0136fdf0(Framework.SystemsManagement.Instrumentation.Console.View)-&gt;<br>013a5f50(System.Windows.Controls.ContentPresenter)-&gt;<br><span style=\"color:#ff00ff\">01c7b550(System.Windows.Controls.DataVisualization.Charting.Chart)-&gt;</span><br>01c7bb2c(System.Windows.Controls.DataVisualization.Charting.ResourceDictionaryDispenser)-&gt;<br>0138a768(System.Windows.Controls.DataVisualization.ResourceDictionaryCollection)-&gt;<br>0138a778(System.Collections.Generic.List`1[[System.Windows.ResourceDictionary, PresentationFramework]])-&gt;<br>0138d568(System.Object[])-&gt;<br>0138a7b8(System.Windows.ResourceDictionary)-&gt;<br>0139ce34(System.Collections.Generic.List`1[[System.Windows.FrameworkElement, PresentationFramework]])-&gt;<br>0178c43c(System.Object[])-&gt;<br>0178bd98(System.Windows.Controls.DataVisualization.Charting.LineSeries)-&gt;<br><span style=\"color:#ff00ff\">01786bd0(System.Windows.Controls.DataVisualization.Charting.Chart)</span></p>\r\n<p>Note the first chart (01c7b550) I'm guessing is that chart currently active in my UI.&nbsp; That is holding a reference to a ResourceDictionaryDispenser which eventually seems to have a reference to the chart I no longer need.&nbsp; What's up with this?&nbsp; How do I fully get the chart I'm replacing to not be referenced by anything?</p>\r\n<p>Thanks,</p>\r\n<p>Nick</p>",
    "PostedDate": "2010-05-04T07:12:56.773-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]