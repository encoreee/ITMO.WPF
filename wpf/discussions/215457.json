[
  {
    "Id": "453519",
    "ThreadId": "215457",
    "Html": "<p>Hi all,</p>\r\n<p>&nbsp;</p>\r\n<p>I hope somebody can explain why the following code gives me an InvalidOperationException (Operation is not valid while ItemCollection has no inner collection. ItemCollection is uninitialized or binding on ItemsControl.ItemSource supplied null for collection.), when clicking the button?</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color:black;background-color:white\">\r\n<pre>     <span style=\"color:blue\">public</span> <span style=\"color:blue\">partial</span> <span style=\"color:blue\">class</span> Window2\r\n    {\r\n        <span style=\"color:blue\">public</span> Window2()\r\n        {\r\n            InitializeComponent();\r\n\r\n            accordion1.DataContext = <span style=\"color:blue\">new</span> MyItems();\r\n        }\r\n\r\n        <span style=\"color:blue\">private</span> <span style=\"color:blue\">void</span> button1_Click(<span style=\"color:blue\">object</span> sender, RoutedEventArgs e)\r\n        {\r\n            accordion1.DataContext = <span style=\"color:blue\">null</span>;\r\n        }\r\n    }\r\n\r\n    <span style=\"color:blue\">public</span> <span style=\"color:blue\">class</span> MyItems\r\n    {\r\n        <span style=\"color:blue\">public</span> List&lt;string&gt; Items\r\n        {\r\n            <span style=\"color:blue\">get</span>\r\n            {\r\n                <span style=\"color:blue\">return</span> <span style=\"color:blue\">new</span> List&lt;string&gt; { <span style=\"color:#a31515\">&quot;Test1&quot;</span>, <span style=\"color:#a31515\">&quot;Test2&quot;</span>, <span style=\"color:#a31515\">&quot;Test3&quot;</span> };\r\n            }\r\n        }\r\n    }</pre>\r\n<pre><span style=\"font-family:'Segoe UI', 'Microsoft Sans Serif', Arial, Geneva, sans-serif;white-space:normal\"><br></span></pre>\r\n<pre><span style=\"font-family:'Segoe UI', 'Microsoft Sans Serif', Arial, Geneva, sans-serif;white-space:normal\">XAML:</span></pre>\r\n<pre><span style=\"font-family:'Segoe UI', 'Microsoft Sans Serif', Arial, Geneva, sans-serif;white-space:normal\"><br></span></pre>\r\n<pre><span style=\"font-family:'Segoe UI', 'Microsoft Sans Serif', Arial, Geneva, sans-serif;white-space:normal\"><div style=\"color:black;background-color:white\"><pre><span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Window</span> <span style=\"color:red\">x:Class</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">WpfApplication.Window2</span><span style=\"color:black\">&quot;</span>\r\n    <span style=\"color:red\">xmlns</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">http://schemas.microsoft.com/winfx/2006/xaml/presentation</span><span style=\"color:black\">&quot;</span>\r\n    <span style=\"color:red\">xmlns:x</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">http://schemas.microsoft.com/winfx/2006/xaml</span><span style=\"color:black\">&quot;</span>\r\n    <span style=\"color:red\">Title</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Window2</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Height</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">300</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Width</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">300</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">xmlns:my</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Layout.Toolkit</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\r\n    <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Grid</span><span style=\"color:blue\">&gt;</span>\r\n        <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">my</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">Accordion</span> <span style=\"color:red\">Name</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">accordion1</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">DataContext</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">{Binding}</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">ItemsSource</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">{Binding Path=Items}</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">HorizontalAlignment</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Stretch</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Height</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">230</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">VerticalAlignment</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Top</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">/&gt;</span>\r\n        <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Button</span> <span style=\"color:red\">Height</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">28</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">HorizontalAlignment</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Right</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Name</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">button1</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">VerticalAlignment</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Bottom</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Width</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">56</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Click</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">button1_Click</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>Button<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Button</span><span style=\"color:blue\">&gt;</span>\r\n    <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Grid</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Window</span><span style=\"color:blue\">&gt;</span>\r\n\r\n</pre>\r\n</div>\r\n</span></pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<pre><br></pre>\r\n<p>&nbsp;</p>\r\n<p>Kind regards,</p>\r\n<p>Berthold</p>",
    "PostedDate": "2010-06-09T06:15:24.743-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "461612",
    "ThreadId": "215457",
    "Html": "<p>Ok, I found the bug in the Accordion class. In the file <strong>Accordion.cs</strong> in line number 1158 in method &quot;UnselectItem(int index, object item)&quot; the following code can be found:</p>\r\n<p>\r\n<div style=\"color:black;background-color:white\">\r\n<pre>            <span style=\"color:blue\">if</span> (index &lt; 0 || index &gt; Items.Count)\r\n            {\r\n                <span style=\"color:green\">// invalid</span>\r\n                <span style=\"color:blue\">return</span>;\r\n            }\r\n\r\n</pre>\r\n</div>\r\n</p>\r\n<p>This must be changed in:</p>\r\n<p>\r\n<div style=\"color:black;background-color:white\">\r\n<pre>            <span style=\"color:blue\">if</span> (index &lt; 0 || index &gt; Items.Count || Items.Count == 0)\r\n            {\r\n                <span style=\"color:green\">// invalid index or no items to unselect</span>\r\n                <span style=\"color:blue\">return</span>;\r\n            }\r\n\r\n</pre>\r\n</div>\r\n</p>\r\n<p>Because when switching databinding source (or setting it to null) while an item was selected the library crashes because the Items collection has no items while the first item is tried to received in the same <br>above metioned method in line 1173.<br><br>Please fix this in one of the future releases!<br><br>Kind regards,<br>Berthold Hutten&nbsp;</p>",
    "PostedDate": "2010-06-30T05:25:19.783-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]