[
  {
    "Id": "214082",
    "ThreadId": "63017",
    "Html": "<p>When typing the date in the text box of the DatePicker control, if the date was, for example, &quot;7/19/2009&quot;, and the user typed in &quot;7-20-09&quot;, after the value&nbsp;was committed, the text&nbsp;would&nbsp;change&nbsp;to the format &quot;7/20/2009&quot;. This is good, and what I expected. However, if the date value didn't change, the format&nbsp;was not updated. For example, if the date was &quot;7/20/2009&quot;, and the user cleared that text and typed in &quot;7-20-09&quot;, I would expect the text to be formatted as &quot;7/20/2009&quot;. However, it instead&nbsp;stayed as the text &quot;7-20-09&quot;.</p>\r\n<p>I found that by changing the code in DatePicker.cs as follows, the behavior was consistent between changed and unchanged underlying dates:</p>\r\n<p><strong><span style=\"text-decoration:underline\">Original Code</span></strong></p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre><span style=\"color:Blue\">        private</span> DateTime? SetTextBoxValue(<span style=\"color:Blue\">string</span> s)\r\n        {\r\n            <span style=\"color:Blue\">if</span> (<span style=\"color:Blue\">string</span>.IsNullOrEmpty(s))\r\n            {\r\n                SetValue(TextProperty, s);\r\n                <span style=\"color:Blue\">return</span> <span style=\"color:Blue\">this</span>.SelectedDate;\r\n            }\r\n            <span style=\"color:Blue\">else</span>\r\n            {\r\n                DateTime? d = ParseText(s);\r\n\r\n                <span style=\"color:Blue\">if</span> (d != <span style=\"color:Blue\">null</span>)\r\n                {\r\n                    <strong>SetValue(TextProperty, s);</strong>\r\n                    <span style=\"color:Blue\">return</span> d;\r\n                }\r\n                <span style=\"color:Blue\">else</span>\r\n                {\r\n                    <span style=\"color:Green\">// If parse error:</span>\r\n                    <span style=\"color:Green\">// TextBox should have the latest valid selecteddate value:</span>\r\n                    <span style=\"color:Blue\">if</span> (<span style=\"color:Blue\">this</span>.SelectedDate != <span style=\"color:Blue\">null</span>)\r\n                    {\r\n                        <span style=\"color:Blue\">string</span> newtext = <span style=\"color:Blue\">this</span>.DateTimeToString((DateTime)<span style=\"color:Blue\">this</span>.SelectedDate);\r\n                        SetValue(TextProperty, newtext);\r\n                        <span style=\"color:Blue\">return</span> <span style=\"color:Blue\">this</span>.SelectedDate;\r\n                    }\r\n                    <span style=\"color:Blue\">else</span>\r\n                    {\r\n                        SetWaterMarkText();\r\n                        <span style=\"color:Blue\">return</span> <span style=\"color:Blue\">null</span>;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n</pre>\r\n</div>\r\n<p><strong><span style=\"text-decoration:underline\">New Code</span></strong></p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre><span style=\"color:Blue\">        private</span> DateTime? SetTextBoxValue(<span style=\"color:Blue\">string</span> s)\r\n        {\r\n            <span style=\"color:Blue\">if</span> (<span style=\"color:Blue\">string</span>.IsNullOrEmpty(s))\r\n            {\r\n                SetValue(TextProperty, s);\r\n                <span style=\"color:Blue\">return</span> <span style=\"color:Blue\">this</span>.SelectedDate;\r\n            }\r\n            <span style=\"color:Blue\">else</span>\r\n            {\r\n                DateTime? d = ParseText(s);\r\n\r\n                <span style=\"color:Blue\">if</span> (d != <span style=\"color:Blue\">null</span>)\r\n                {\r\n                    <strong>SetValue(TextProperty, DateTimeToString(d.Value));</strong>\r\n                    <span style=\"color:Blue\">return</span> d;\r\n                }\r\n                <span style=\"color:Blue\">else</span>\r\n                {\r\n                    <span style=\"color:Green\">// If parse error:</span>\r\n                    <span style=\"color:Green\">// TextBox should have the latest valid selecteddate value:</span>\r\n                    <span style=\"color:Blue\">if</span> (<span style=\"color:Blue\">this</span>.SelectedDate != <span style=\"color:Blue\">null</span>)\r\n                    {\r\n                        <span style=\"color:Blue\">string</span> newtext = <span style=\"color:Blue\">this</span>.DateTimeToString((DateTime)<span style=\"color:Blue\">this</span>.SelectedDate);\r\n                        SetValue(TextProperty, newtext);\r\n                        <span style=\"color:Blue\">return</span> <span style=\"color:Blue\">this</span>.SelectedDate;\r\n                    }\r\n                    <span style=\"color:Blue\">else</span>\r\n                    {\r\n                        SetWaterMarkText();\r\n                        <span style=\"color:Blue\">return</span> <span style=\"color:Blue\">null</span>;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n</pre>\r\n</div>\r\n<p>The code changed was the second call to SetValue.</p>\r\n<p>Are there any other side effects to changing the DatePicker code as shown so that the text formatting is applied even if the date doesn't change? If it is intended that the text formatting is not applied when the date doesn't change, could we at least get a flag that allows us to choose one way or the other?</p>",
    "PostedDate": "2009-07-20T18:28:06.367-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "214573",
    "ThreadId": "63017",
    "Html": "<p>Hi Jaxoson -</p>\r\n<p>Nice find :) The issue has been entered into our database. Thanks for the suggested fix too :)</p>\r\n<p>-Eric, MSFT</p>",
    "PostedDate": "2009-07-21T17:14:33.433-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "215860",
    "ThreadId": "63017",
    "Html": "<p>No problem. Thanks for looking into this. (And for the code so I could change it to do what I wanted it to do in the meantime.)</p>",
    "PostedDate": "2009-07-24T13:56:18.367-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]