[
  {
    "Id": "249269",
    "ThreadId": "72970",
    "Html": "<p>Hello,</p>\r\n<p>how can I make the focus move to the next control when the DatePicker textbox has the focus and the user presses the Enter key?</p>\r\n<p>The KeyDown event is not raised by DatePicker when the user presses the Enter key.</p>\r\n<p>As a workaround I changed the source code of DatePicker as shown below.&nbsp;</p>\r\n<p>However, this does not work. The MoveFocus command is executed but the focus does not move. Nothing happens.</p>\r\n<p>Does anybody have an idea?</p>\r\n<p>Thanks for your time.</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre>        <span style=\"color:Blue\">private</span> <span style=\"color:Blue\">bool</span> ProcessDatePickerKey(KeyEventArgs e)\r\n        {\r\n            <span style=\"color:Blue\">switch</span> (e.Key)\r\n            {\r\n                <span style=\"color:Blue\">case</span> Key.System:\r\n                {\r\n                    <span style=\"color:Blue\">switch</span> (e.SystemKey)\r\n                    {\r\n                        <span style=\"color:Blue\">case</span> Key.Down:\r\n                        {\r\n                            <span style=\"color:Blue\">if</span> ((Keyboard.Modifiers &amp; ModifierKeys.Alt) == ModifierKeys.Alt)\r\n                            {\r\n                                TogglePopUp();\r\n                                <span style=\"color:Blue\">return</span> <span style=\"color:Blue\">true</span>;\r\n                            }\r\n\r\n                            <span style=\"color:Blue\">break</span>;\r\n                        }\r\n                    }\r\n\r\n                    <span style=\"color:Blue\">break</span>;\r\n                }\r\n\r\n                <span style=\"color:Blue\">case</span> Key.Enter:\r\n                {\r\n                    <span style=\"color:Blue\">this</span>.MoveFocus(<span style=\"color:Blue\">new</span> TraversalRequest(FocusNavigationDirection.Next));     \r\n                    <span style=\"color:Green\">//SetSelectedDate();</span>\r\n                    <span style=\"color:Blue\">return</span> <span style=\"color:Blue\">true</span>;\r\n                }\r\n            }</pre>\r\n</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;private bool ProcessDatePickerKey(KeyEventArgs e)</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;{</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;switch (e.Key)</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;case Key.System:</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;switch (e.SystemKey)</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;case Key.Down:</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if ((Keyboard.Modifiers &amp; ModifierKeys.Alt) == ModifierKeys.Alt)</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TogglePopUp();</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return true;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;break;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;break;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;case Key.Enter:</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;this.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next)); &nbsp; &nbsp;&nbsp;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//SetSelectedDate();</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return true;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp;&nbsp;</div>",
    "PostedDate": "2009-10-24T07:22:40.463-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "249280",
    "ThreadId": "72970",
    "Html": "<p>Finally, I could solve this problem. I added the following lines to DatePicker.cs:</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre>        <span style=\"color:Blue\">public</span> <span style=\"color:Blue\">event</span> EventHandler&lt;KeyEventArgs&gt; EnterKeyPressed;\r\n\r\n        <span style=\"color:Blue\">protected</span> <span style=\"color:Blue\">virtual</span> <span style=\"color:Blue\">void</span> OnEnterKeyPressed(KeyEventArgs e)\r\n        {\r\n            EventHandler&lt;KeyEventArgs&gt; handler = <span style=\"color:Blue\">this</span>.EnterKeyPressed;\r\n            <span style=\"color:Blue\">if</span> (<span style=\"color:Blue\">null</span> != handler)\r\n            {\r\n                handler(<span style=\"color:Blue\">this</span>, e);\r\n            }\r\n        }\r\n\r\n</pre>\r\n<pre><div style=\"color:Black;background-color:White\"><pre>        <span style=\"color:Blue\">private</span> <span style=\"color:Blue\">bool</span> ProcessDatePickerKey(KeyEventArgs e)\r\n        {\r\n            <span style=\"color:Blue\">switch</span> (e.Key)\r\n            {\r\n                <span style=\"color:Blue\">case</span> Key.System:\r\n                {\r\n                    <span style=\"color:Blue\">switch</span> (e.SystemKey)\r\n                    {\r\n                        <span style=\"color:Blue\">case</span> Key.Down:\r\n                        {\r\n                            <span style=\"color:Blue\">if</span> ((Keyboard.Modifiers &amp; ModifierKeys.Alt) == ModifierKeys.Alt)\r\n                            {\r\n                                TogglePopUp();\r\n                                <span style=\"color:Blue\">return</span> <span style=\"color:Blue\">true</span>;\r\n                            }\r\n\r\n                            <span style=\"color:Blue\">break</span>;\r\n                        }\r\n                    }\r\n\r\n                    <span style=\"color:Blue\">break</span>;\r\n                }\r\n\r\n                <span style=\"color:Blue\">case</span> Key.Enter:\r\n                {\r\n                    OnEnterKeyPressed(e);\r\n\r\n                    <span style=\"color:Green\">//SetSelectedDate();</span>\r\n                    <span style=\"color:Blue\">return</span> <span style=\"color:Blue\">true</span>;\r\n                }\r\n            }\r\n</pre>\r\n</div>\r\n</pre>\r\n</div>\r\n<p>Then, in my page/window code behind, I handle the new event as follows:</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre>        <span style=\"color:Blue\">private</span> <span style=\"color:Blue\">void</span> DatePicker_EnterKeyPressed(<span style=\"color:Blue\">object</span> sender, KeyEventArgs e)\r\n        {\r\n            <span style=\"color:Blue\">var</span> uie = e.OriginalSource <span style=\"color:Blue\">as</span> UIElement;\r\n\r\n            <span style=\"color:Blue\">if</span> (e.Key == Key.Enter)\r\n            {\r\n                e.Handled = <span style=\"color:Blue\">true</span>;\r\n                uie.MoveFocus(<span style=\"color:Blue\">new</span> TraversalRequest(FocusNavigationDirection.Next));\r\n            }\r\n        }\r\n</pre>\r\n</div>\r\n<p>&nbsp;Now the focus changes to the next control when I press the Enter key.</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2009-10-24T08:37:40.973-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]