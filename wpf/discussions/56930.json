[
  {
    "Id": "192405",
    "ThreadId": "56930",
    "Html": "<p>\r\n<p><span style=\"font-size:10.0pt;font-family:'Verdana','sans-serif';color:#17365d\"><span style=\"\">&nbsp;</span>We have a grid where we am programmatically creating columns. &nbsp;A requirements has surfaced to add a button to a Column Header. &nbsp;We are trying to use a dataTemplate.</span></p>\r\n<p style=\"\"><span style=\"font-size:10.0pt;font-family:'Verdana','sans-serif';color:#17365d\">Is there an event, similar to the LoadingRowDetails event, where I can do this and it will impact the instance which is part of the visual tree? &nbsp;I think the issue is related to using &quot;LoadContent&quot;.</span></p>\r\n<p style=\"\"><span style=\"font-size:10.0pt;font-family:'Segoe UI','sans-serif';color:black\">pseudoCode:</span></p>\r\n<p style=\"margin-left:.5in\"><span style=\"font-size:8.0pt;font-family:'Courier New';color:black\">DataGridTextColumn newColumn1 = new DataGridTextColumn(); &nbsp;</span><em><span style=\"font-size:8.0pt;font-family:'Courier New';color:red\">//works</span></em><span style=\"font-size:8.0pt;font-family:'Courier New';color:black\"></span></p>\r\n<p style=\"margin-left:.5in\"><span style=\"font-size:8.0pt;font-family:'Courier New';color:black\">DataTemplate dt = (DataTemplate)this.FindResource(&quot;DatagridDataTemplate&quot;);</span></p>\r\n<p style=\"margin-left:.5in\"><span style=\"font-size:8.0pt;font-family:'Courier New';color:black\">newColumn1.HeaderTemplate = dt;</span></p>\r\n<p style=\"margin-left:.5in\"><span style=\"font-size:8.0pt;font-family:'Courier New';color:black\">Binding binding1 = new Binding(&quot;Country&quot;);</span><em><span style=\"font-size:8.0pt;font-family:'Courier New';color:red\">//works</span></em><span style=\"font-size:8.0pt;font-family:'Courier New';color:black\"></span></p>\r\n<p style=\"margin-left:.5in\"><span style=\"font-size:8.0pt;font-family:'Courier New';color:black\">binding1.Mode = System.Windows.Data.BindingMode.TwoWay;</span><em><span style=\"font-size:8.0pt;font-family:'Courier New';color:red\">//works</span></em><span style=\"font-size:8.0pt;font-family:'Courier New';color:black\"></span></p>\r\n<p style=\"margin-left:.5in\"><span style=\"font-size:8.0pt;font-family:'Courier New';color:black\">newColumn1.Binding = binding1;</span><em><span style=\"font-size:8.0pt;font-family:'Courier New';color:red\">//works</span></em><span style=\"font-size:8.0pt;font-family:'Courier New';color:black\"></span></p>\r\n<p style=\"margin-left:.5in\"><span style=\"font-size:8.0pt;font-family:'Courier New';color:black\">dataGridParent.Columns.Add(newColumn1);</span><em><span style=\"font-size:8.0pt;font-family:'Courier New';color:red\">//works</span></em></p>\r\n<p style=\"margin-left:.5in\"><span style=\"font-size:8.0pt;font-family:'Courier New';color:black\">&nbsp;</span></p>\r\n<p style=\"margin-left:.5in\"><em><span style=\"font-size:8.0pt;font-family:'Courier New';color:red\">//This is the trouble:</span></em></p>\r\n<p style=\"margin-left:.5in\"><span style=\"font-size:8.0pt;font-family:'Courier New';color:black\">Button headerButton = ((Button)(dataGridParent.Columns[2].HeaderTemplate.LoadContent() as StackPanel).FindName(&quot;ButtonColumn&quot;));</span></p>\r\n<p style=\"margin-left:.5in\"><span style=\"font-size:8.0pt;font-family:'Courier New';color:black\">headerButton.Content = &quot;Column12&quot;;</span><em><span style=\"font-size:8.0pt;font-family:'Courier New';color:red\">//the original placeholder content from the DataTemplate remains</span></em><span style=\"font-size:8.0pt;font-family:'Courier New';color:black\"></span></p>\r\n<p style=\"margin-left:.5in\"><span style=\"font-size:8.0pt;font-family:'Courier New';color:black\">headerButton.Click += [ . . . ]</span><em><span style=\"font-size:8.0pt;font-family:'Courier New';color:red\">&nbsp;&nbsp;&nbsp;//no delegate is added and no events are fired.</span></em><span style=\"font-size:8.0pt;font-family:'Courier New';color:black\"></span></p>\r\n<p style=\"margin-left:.5in\"><span style=\"font-size:8.0pt;font-family:'Courier New';color:black\">&nbsp;</span></p>\r\n<p style=\"margin-left:.5in\"><span style=\"font-size:8.0pt;font-family:'Courier New';color:black\">dataGridParent.UpdateLayout();</span></p>\r\n<p><span style=\"font-size:10.0pt;font-family:'Segoe UI','sans-serif';color:black\">&nbsp;</span></p>\r\n</p>\r\n<p>Thanks!</p>\r\n<p>Tracy</p>",
    "PostedDate": "2009-05-20T08:14:27.717-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "193890",
    "ThreadId": "56930",
    "Html": "<p>The Header property is an Object, so you can assign anything to it. Why not just assign a button instead of the normal simple string?</p>\r\n<p>DataGridTextColumn column = new DataGridTextColumn();<br>...<br>Button button = new Button();<br>...<br>column.Header = button;<br>this.dataGrid.Columns.Add(column);</p>\r\n<p>If you need to show multiple controls, a StackPanel works fine for wrapping them in a single object instance.</p>",
    "PostedDate": "2009-05-25T04:57:12.297-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "194391",
    "ThreadId": "56930",
    "Html": "<p>Ok! &nbsp;This works! Instead of using a DataTemplate that had a stackpanel, textblock and a button, I am doing this now in the code behind. &nbsp;I do need to now set the Header row height probrammatically as well. &nbsp;How can I do that?</p>\r\n<p>here is my code snippet:</p>\r\n<p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #region Add a Column for the Parent Attribute</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DataGridTextColumn newColumn1 = new DataGridTextColumn();</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Binding binding1 = new Binding(&quot;Country&quot;);</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;binding1.Mode = System.Windows.Data.BindingMode.TwoWay;</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;newColumn1.Binding = binding1;</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#region Add a button here to the header&nbsp;</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//create a simple stack panel to hold a text box as well as a button an not use a XAML dataTemplate</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;StackPanel headerStackPanel = new StackPanel();</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TextBlock headerTextBlock = new TextBlock();</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#region set the attributes of the textBlock including the TEXT</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.aspx</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;headerTextBlock.TextWrapping = TextWrapping.Wrap;</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;headerTextBlock.TextAlignment = TextAlignment.Center;</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;headerTextBlock.Inlines.Add(new Run(&quot; Centered Text Over the Button &quot;));</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#endregion</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;headerStackPanel.Children.Add(headerTextBlock);</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Button headerButton = new Button();</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;headerButton.Content = &quot;BannonButton&quot;;</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;headerButton.Click += new RoutedEventHandler(headerButton_Click);</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;headerStackPanel.Children.Add(headerButton);</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;headerStackPanel.Height = double.NaN; //this sets the height = autosize</p>\r\n<p>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;newColumn1.Header = headerStackPanel;</p>\r\n<p><span style=\"white-space:pre\"> </span><span style=\"color:#ff0000;font-family:'Courier New';font-size:11px;font-style:italic\">//*** HOW CAN I SET THE HEIGHT OF THE DataGrid's Row Header?</span></p>\r\n</p>\r\n<p>&nbsp;<span style=\"white-space:pre\"> </span>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;dataGridParent.Columns.Add(newColumn1); &nbsp; &nbsp;&nbsp;<span style=\"color:#ff0000;font-family:'Courier New';font-size:11px;font-style:italic\">//works</span></p>\r\n<p>&nbsp;</p>\r\n<p><span style=\"color:#ff0000;font-family:'Courier New';font-size:11px;font-style:italic\"><br></span></p>",
    "PostedDate": "2009-05-26T10:56:41.167-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "194504",
    "ThreadId": "56930",
    "Html": "<p>Hi Tracy,</p>\r\n<p>Going back to your original question, the reason that it wasn't working is because LoadContent will always load a copy of the element you're trying to load, instead of the actual instance which is instantiated in the tree.&nbsp; So you were making your changes to a copy of that button, instead of the actual button.&nbsp; The way that we would recommend to do this is:</p>\r\n<p>1. It sounds like you need two different data templates for your column headers - one which has this button, and one which doesn't.&nbsp; You should create the two data templates and then use DataGridColumn.HeaderTemplateSelector to choose when to apply the template with the button.&nbsp; This will make things static rather than dynamic, which will simplify the situation.</p>\r\n<p>2. If you want to attach an event for Button.Click within that data template, you have a couple options:</p>\r\n<p>a) Walk the visual tree to find the instantiated instance of the button and set it directly on that button, OR</p>\r\n<p>b) Use a Style to set the handler for the Click event.</p>\r\n<p>This will allow you to avoid the problem with the header resizing that you've run into.&nbsp; We discussed the header resizing issue and haven't been able to come up with a good solution yet, but I will let you know if we think of anything.</p>\r\n<p>Thanks!<br>Samantha</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2009-05-26T13:45:25.353-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "194538",
    "ThreadId": "56930",
    "Html": "<p>\r\n<p><span style=\"font-size:10.0pt;font-family:'Verdana','sans-serif';color:#17365d\">If at all possible, I&rsquo;d like to use the simpler approach that doesn&rsquo;t involve data templates&hellip; I had assumed that the sizing issue would not be too difficult&hellip;<span style=\"\">&nbsp; </span></span></p>\r\n<p><span style=\"color:#17365d;font-family:Verdana\">8(<span style=\"\">&nbsp;</span></span></p>\r\n<p><span style=\"color:#17365d;font-family:Verdana\"><span style=\"\">\r\n<p><span style=\"font-size:10.0pt;font-family:'Verdana','sans-serif';color:#17365d\">Let me know if your team can find a good way to do this.<span style=\"\">&nbsp; </span>I thought something like setting the datagrid ColumnRowHeader.Height&hellip;.<span style=\"\">&nbsp; </span>but that didn&rsquo;t appear to work.</span></p>\r\n</span></span></p>\r\n<p><span style=\"font-size:10.0pt;font-family:'Verdana','sans-serif';color:#17365d\">I&rsquo;ve never used &ldquo;</span><span style=\"font-size:9.5pt;font-family:'Segoe UI','sans-serif';color:#30332d\">DataGridColumn.HeaderTemplateSelector&rdquo;&hellip;</span><span style=\"font-size:10.0pt;font-family:'Verdana','sans-serif';color:#17365d\"> can you point me to a sample/snippet in the interim?</span></p>\r\n<p><span style=\"font-size:10.0pt;font-family:'Verdana','sans-serif';color:#17365d\">&nbsp;</span></p>\r\n</p>",
    "PostedDate": "2009-05-26T15:25:01.183-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]