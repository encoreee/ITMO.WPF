[
  {
    "Id": "173439",
    "ThreadId": "51707",
    "Html": "To be clear, the DataGrid is usable, but the lag is quite apparent and irritating.<br>\r\n<br>\r\nWhile scrolling, I am getting only about 2 or 3 frames per second (Measured by the Perforator tool).&nbsp; I am intentionally scrolling fast so that on each frame there is competently new set of rows on the screen.&nbsp; There is 30 rows and 15 columns visible on the screen.<br>\r\n<br>\r\nWhen I sort column, it takes about 1 second for the screen to refresh.<br>\r\n<br>\r\nCan someone please try to explain to me why the performance is so bad?&nbsp; It seems to me that something as simple as this should run at least 10 times faster.<br>\r\n<br>\r\nThank you very much for you reply,<br>\r\nDavid<br>\r\n<br>\r\nPS: I have 1.7 GHz laptop with WinXP SP3, .NET 3.5 SP1 and DirectX 9.0c.<br>\r\nI am using the folloing code:\r\n<pre><span>public</span> Window1()<br>{<br>    InitializeComponent();<br><br>    DataGrid dataGrid = <span>new</span> DataGrid();<br><br>    <span>this</span>.Content = dataGrid;<br><br>    dataGrid.RowHeight = 20;<br>    dataGrid.EnableRowVirtualization = <span>true</span>;<br>    dataGrid.EnableColumnVirtualization = <span>true</span>;<br><br>    <span>for</span>(<span>int</span> i = 0; i &lt; 15; i++) {<br>        DataGridTextColumn column = <span>new</span> DataGridTextColumn();<br>        column.Header = i.ToString();<br>        column.Binding = <span>new</span> Binding(<span>&quot;Data&quot;</span>) { Mode = BindingMode.OneWay};<br>        column.Width = 50;<br>        dataGrid.Columns.Add(column);<br>    }<br><br>    <span>for</span>(<span>int</span> i = 0; i &lt; 300; i++) {<br>        dataGrid.Items.Add(<span>new</span> { Data = i.ToString() });<br>    }<br>}</pre>\r\n",
    "PostedDate": "2009-03-30T05:48:36.483-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "174334",
    "ThreadId": "51707",
    "Html": "I'm experiencing similar issues with about the same size of data as you and a similar functioning machine.&nbsp; Using the performance profile tools (http://msdn.microsoft.com/en-us/library/aa969767.aspx) I was able to see that a lot of the grid was getting rendered through software instead of hardware, but I am still a bit amazed at how slow things are scrolling.&nbsp; I wonder if it could have something to do with dynamically building the columns, as I see we are both doing that.<br>\r\n",
    "PostedDate": "2009-04-01T07:07:51.753-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "175445",
    "ThreadId": "51707",
    "Html": "Hello,<br>\r\n<br>\r\nCan you please send in a repro project?\r\n",
    "PostedDate": "2009-04-03T13:17:48.133-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "175473",
    "ThreadId": "51707",
    "Html": "To where?<br>\r\n",
    "PostedDate": "2009-04-03T14:11:50.19-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "175492",
    "ThreadId": "51707",
    "Html": "Thank you for you reply,<br>\r\n<br>\r\nI have uploaded a project file here: <a href=\"http://www.srcf.ucam.org/~ds417/files/PoorScrollPerformance.zip\">http://www.srcf.ucam.org/~ds417/files/PoorScrollPerformance.zip</a><br>\r\n<br>\r\nBest regards,<br>\r\nDavid Srbecky<br>\r\n",
    "PostedDate": "2009-04-03T14:34:21.933-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "188867",
    "ThreadId": "51707",
    "Html": "<p>Bump</p>",
    "PostedDate": "2009-05-11T08:20:29.053-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "189119",
    "ThreadId": "51707",
    "Html": "<p>\r\n<p><span style=\"color:#000000\">How about adding the following properties. PS: Sorry I don't know how to do it in the code.</span></p>\r\n<p><span style=\"color:#ff0000;font-size:x-small\"><span style=\"color:#ff0000;font-size:x-small\">IsSynchronizedWithCurrentItem </span></span><span style=\"color:#0000ff;font-size:x-small\"><span style=\"color:#0000ff;font-size:x-small\">= &quot;True&quot;<br></span></span><span style=\"color:#ff0000;font-size:x-small\"><span style=\"color:#ff0000;font-size:x-small\">VirtualizingStackPanel.IsVirtualizing </span></span><span style=\"color:#0000ff;font-size:x-small\"><span style=\"color:#0000ff;font-size:x-small\">= &quot;True&quot;<br></span></span><span style=\"color:#ff0000;font-size:x-small\"><span style=\"color:#ff0000;font-size:x-small\">VirtualizingStackPanel.VirtualizationMode </span></span><span style=\"color:#0000ff;font-size:x-small\"><span style=\"color:#0000ff;font-size:x-small\">=&quot;Recycling&quot;</span></span></p>\r\n<p><span style=\"color:#0000ff;font-size:x-small\"><span style=\"color:#0000ff;font-size:x-small\"><span style=\"color:#000000\">OR</span></span></span></p>\r\n</p>\r\n<p><span style=\"color:#0000ff;font-size:x-small\"><span style=\"color:#0000ff;font-size:x-small\">\r\n<p><span style=\"color:#ff0000;font-size:x-small\"><span style=\"color:#ff0000;font-size:x-small\">ScrollViewer.IsDeferredScrollingEnabled</span></span><span style=\"color:#0000ff;font-size:x-small\"><span style=\"color:#0000ff;font-size:x-small\">=&quot;False&quot;</span></span></p>\r\n<p><span style=\"color:#0000ff;font-size:x-small\"><span style=\"color:#0000ff;font-size:x-small\"><span style=\"color:#000000\">Jerry</span></span></span></p>\r\n</span></span></p>",
    "PostedDate": "2009-05-11T21:54:03.213-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "189840",
    "ThreadId": "51707",
    "Html": "<p>PS:&nbsp; I have the lastest graphics card drivers and Perforator says WPF is using &quot;Hardware render target&quot;</p>\r\n<p>As per your advice, I have tried the following code:<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; dataGrid.IsSynchronizedWithCurrentItem = true;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; VirtualizingStackPanel.SetIsVirtualizing(dataGrid, true);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; VirtualizingStackPanel.SetVirtualizationMode(dataGrid, VirtualizationMode.Recycling);<br>However, it does not make any observable difference.&nbsp; I think &quot;dataGrid.EnableRowVirtualization = <span>true</span>;&quot; had the same effect.</p>\r\n<p>&nbsp;</p>\r\n<p>This is curious - disabling the virtualization does not have any significant effect either.&nbsp; It does have significant effect on the loading speed, but the scrolling speed is still same (pretty bad).</p>\r\n<p>I am confused.&nbsp; <strong>Why is scrolling so slow even when virtualization is off?</strong>&nbsp; Does WPF have to create/measure/arrange cells even when virtualization is off?</p>\r\n<p>I know that it is probably not your fault, but just a result of WPF design, but could someone please try to explain to me why is the scrolling so slow?&nbsp; WPF is using DirectX under the covers, right?&nbsp; So rendering speed should be prety fast.&nbsp; And just scrolling should not be causing any expensive layout changes.</p>\r\n<p>Thanks,<br>David</p>",
    "PostedDate": "2009-05-13T09:49:36.837-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]