[
  {
    "Id": "985379",
    "ThreadId": "429273",
    "Html": "\r\n<p>Today, I got a crazy behaviour. My multibinding works on one machine but on another I got DependencyProperty.UnsetValue.&nbsp;</p>\r\n<p>Machine 1:</p>\r\n<p>Win8 works fine</p>\r\n<p>Machine 2:</p>\r\n<p>Win7 got DependencyProperty.UnsetValue</p>\r\n<p>Here is my XAML:</p>\r\n<pre><span> </span><span>&lt;StackPanel</span><span> </span><span>Margin</span><span>=</span><span>&quot;10&quot;</span><span> </span><span>Orientation</span><span>=</span><span>&quot;Horizontal&quot;</span><span>&gt;</span><span>\r\n            </span><span>&lt;TextBlock</span><span> </span><span>VerticalAlignment</span><span>=</span><span>&quot;Center&quot;</span><span> </span><span>Margin</span><span>=</span><span>&quot;10&quot;</span><span> </span><span>Text</span><span>=</span><span>&quot;Steuer: &quot;</span><span> </span><span>/&gt;</span><span>\r\n            </span><span>&lt;ComboBox</span><span> </span><span>Name</span><span>=</span><span>&quot;ComboSteuer&quot;</span><span> </span><span>ItemsSource</span><span>=</span><span>&quot;{Binding Steuern}&quot;</span><span> </span><span>SelectedIndex</span><span>=</span><span>&quot;0&quot;</span><span> </span><span>HorizontalContentAlignment</span><span>=</span><span>&quot;Stretch&quot;</span><span>  </span><span>Width</span><span>=</span><span>&quot;100&quot;</span><span> </span><span>Margin</span><span>=</span><span>&quot;10&quot;</span><span> </span><span>/&gt;</span><span>\r\n        </span><span>&lt;/StackPanel&gt;</span><span>\r\n        </span><span>&lt;DataGrid</span><span>\r\n            </span><span>SelectionMode</span><span>=</span><span>&quot;Extended&quot;</span><span>\r\n            </span><span>SelectionUnit</span><span>=</span><span>&quot;FullRow&quot;</span><span>\r\n            </span><span>RowHeaderWidth</span><span>=</span><span>&quot;0&quot;</span><span>\r\n            </span><span>IsReadOnly</span><span>=</span><span>&quot;True&quot;</span><span>\r\n            </span><span>ItemsSource</span><span>=</span><span>&quot;{Binding Books}&quot;</span><span>\r\n            </span><span>AutoGenerateColumns</span><span>=</span><span>&quot;False&quot;</span><span>&gt;</span><span>\r\n            </span><span>&lt;DataGrid.Columns&gt;</span><span>\r\n                </span><span>&lt;DataGridTextColumn</span><span> </span><span>Header</span><span>=</span><span>&quot;Title&quot;</span><span> </span><span>Binding</span><span>=</span><span>&quot;{Binding Title}&quot;</span><span> </span><span>Width</span><span>=</span><span>&quot;*&quot;</span><span> </span><span>/&gt;</span><span>\r\n                </span><span>&lt;DataGridTextColumn</span><span> </span><span>Header</span><span>=</span><span>&quot;Autor&quot;</span><span> </span><span>Binding</span><span>=</span><span>&quot;{Binding Author}&quot;</span><span> </span><span>Width</span><span>=</span><span>&quot;*&quot;</span><span> </span><span>/&gt;</span><span>\r\n                </span><span>&lt;DataGridTextColumn</span><span> </span><span>Header</span><span>=</span><span>&quot;Netto&quot;</span><span> </span><span>Binding</span><span>=</span><span>&quot;{Binding NetPrice, StringFormat=' {0} €'}&quot;</span><span> </span><span>Width</span><span>=</span><span>&quot;Auto&quot;</span><span> </span><span>/&gt;</span><span>\r\n                </span><span>&lt;DataGridTextColumn</span><span> </span><span>Header</span><span>=</span><span>&quot;Steuer&quot;</span><span>&gt;</span><span>\r\n                    </span><span>&lt;DataGridTextColumn.Binding&gt;</span><span>\r\n                        </span><span>&lt;MultiBinding</span><span> </span><span>StringFormat</span><span>=</span><span>' {0:f} €'</span><span> </span><span>Converter</span><span>=</span><span>&quot;{multiDataBindingSample:SteuerConverter}&quot;</span><span>&gt;</span><span>\r\n                            </span><span>&lt;Binding</span><span> </span><span>ElementName</span><span>=</span><span>&quot;ComboSteuer&quot;</span><span> </span><span>Path</span><span>=</span><span>&quot;SelectedValue&quot;</span><span> </span><span>/&gt;</span><span>\r\n                            </span><span>&lt;Binding</span><span> </span><span>Path</span><span>=</span><span>&quot;NetPrice&quot;</span><span> </span><span>/&gt;</span><span>\r\n                        </span><span>&lt;/MultiBinding&gt;</span><span>\r\n                    </span><span>&lt;/DataGridTextColumn.Binding&gt;</span><span>\r\n                </span><span>&lt;/DataGridTextColumn&gt;</span></pre>\r\n<p>And my converer for the MultiBinding looks:</p>\r\n<pre><span> </span><span>public</span><span> </span><span>class</span><span> </span><span>SteuerConverter</span><span> </span><span>:</span><span> </span><span>MarkupExtension</span><span>,</span><span> </span><span>IMultiValueConverter</span><span>\r\n    </span><span>{</span><span>\r\n        </span><span>private</span><span> </span><span>SteuerConverter</span><span> _bruttoConverter</span><span>;</span><span>\r\n\r\n        </span><span>public</span><span> </span><span>object</span><span> </span><span>Convert</span><span>(</span><span>object</span><span>[]</span><span> values</span><span>,</span><span> </span><span>Type</span><span> targetType</span><span>,</span><span> </span><span>object</span><span> parameter</span><span>,</span><span> </span><span>CultureInfo</span><span> culture</span><span>)</span><span>\r\n        </span><span>{</span><span>\r\n            </span><span>double</span><span> steuer </span><span>=</span><span>0</span><span>;</span><span>\r\n            </span><span>if</span><span> </span><span>(</span><span>Double</span><span>.</span><span>TryParse</span><span>(</span><span>values</span><span>[</span><span>0</span><span>].</span><span>ToString</span><span>(),</span><span> </span><span>out</span><span> steuer</span><span>))</span><span>\r\n            </span><span>{</span><span>\r\n                </span><span>double</span><span> netto </span><span>=</span><span> </span><span>Double</span><span>.</span><span>Parse</span><span>(</span><span>values</span><span>[</span><span>1</span><span>].</span><span>ToString</span><span>());</span><span>\r\n\r\n                </span><span>return</span><span> netto</span><span>/</span><span>100</span><span>*</span><span>steuer</span><span>;</span><span>\r\n            </span><span>}</span><span>\r\n\r\n            \r\n            </span><span>return</span><span> values</span><span>[</span><span>1</span><span>];</span><span>\r\n        </span><span>}</span><span>\r\n\r\n        </span><span>public</span><span> </span><span>object</span><span>[]</span><span> </span><span>ConvertBack</span><span>(</span><span>object</span><span> value</span><span>,</span><span> </span><span>Type</span><span>[]</span><span> targetTypes</span><span>,</span><span> </span><span>object</span><span> parameter</span><span>,</span><span> </span><span>CultureInfo</span><span> culture</span><span>)</span><span>\r\n        </span><span>{</span><span>\r\n            </span><span>return</span><span> </span><span>default</span><span>(</span><span>object</span><span>[]);</span><span>\r\n        </span><span>}</span><span>\r\n\r\n        </span><span>public</span><span> </span><span>override</span><span> </span><span>object</span><span> </span><span>ProvideValue</span><span>(</span><span>IServiceProvider</span><span> serviceProvider</span><span>)</span><span>\r\n        </span><span>{</span><span>\r\n            </span><span>return</span><span> _bruttoConverter </span><span>??</span><span> </span><span>(</span><span>_bruttoConverter </span><span>=</span><span> </span><span>new</span><span> </span><span>SteuerConverter</span><span>());</span><span>\r\n        </span><span>}</span><span>\r\n    </span><span>}</span></pre>\r\n<p>I know the could could be nicer ;-)</p>\r\n<p>Machine 2 with Win7</p>\r\n<p><img src=\"http://social.msdn.microsoft.com/Forums/getfile/218825\" alt=\"\"></p>\r\n<p>Machine 1 with Win8</p>\r\n<p><img src=\"http://social.msdn.microsoft.com/Forums/getfile/218826\" alt=\"\"></p>\r\n<p>Framework is 4.0 on Win7 and on Win8 is 4.5 installed. It looks that in 4.0 ElementBinding ist not allowed in a DataGridtextColumn only in .NET 4.5 it works perfectly. Is there a change or is it really a bug? I don`t find any information on this change.</p>\r\n<p>Kind Regards,</p>\r\n<p>Dany</p>\r\n",
    "PostedDate": "2013-01-11T04:13:51.07-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]