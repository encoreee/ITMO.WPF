[
  {
    "Id": "429963",
    "ThreadId": "209031",
    "Html": "<p>Hi,<br><br>I don't understand a thing. If I use a ContentPresenter to display views (for example, data templates), then the AutoCompleteBox sometimes forgets to display the content (ValueMemberPath). Instead of a settlement name, I can see the type name. &nbsp;For example, the following template displays a location data (settlement, stateprovince, country):&nbsp;</p>\r\n<p>&lt;DataTemplate x:Key=&quot;LocationView&quot;&gt;<br>...<br>&lt;!-- Event Handler Commands --&gt; &nbsp; &nbsp; &nbsp; &nbsp;</p>\r\n<p>&lt;corecommands:CommandTrigger<br>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;EventSource=&quot;{Binding ElementName=acSettlement}&quot;<br>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;Event=&quot;{x:Static toolkitinputcontrols:AutoCompleteBox.PopulatingEvent}&quot;<br>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;Command=&quot;{Binding 'PopulatingCommand'}&quot;<br>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;CommandParameter=&quot;{Binding ElementName=acSettlement}&quot;/&gt;<br><br>&lt;!-- DataTemplate Controls --&gt;&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&lt;toolkitinputcontrols:AutoCompleteBox<br>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;x:Name=&quot;acSettlement&quot;&nbsp;FilterMode=&quot;StartsWith&quot; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;SelectedItem=&quot;{Binding 'SelectedItem.Settlement', Mode=TwoWay}&quot;<br>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;ItemsSource=&quot;{Binding 'Settlement.CollectionView'}&quot;<br>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;ValueMemberPath=&quot;Name&quot; MinimumPrefixLength=&quot;2&quot; MinimumPopulateDelay=&quot;1000&quot;&gt;<br>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&lt;toolkitinputcontrols:AutoCompleteBox.ItemTemplate&gt;<br>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&lt;DataTemplate&gt;<br>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&lt;StackPanel Margin=&quot;2&quot;&gt;<br>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&lt;TextBlock Text=&quot;{Binding 'Name', Mode=OneWay}&quot; FontWeight=&quot;Bold&quot;/&gt;<br>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&lt;TextBlock Text=&quot;{Binding 'StateProvince.Name', Mode=OneWay}&quot; Margin=&quot;8,0,0,0&quot;/&gt;<br>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;TextBlock Text=&quot;{Binding 'StateProvince.Country.IsoName', Mode=OneWay, Converter={coreconverters:CultureStringDisplayNameConverter}}&quot; Margin=&quot;16,0,0,0&quot;/&gt;<br>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&lt;/StackPanel&gt;<br>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&lt;/DataTemplate&gt;<br>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&lt;/toolkitinputcontrols:AutoCompleteBox.ItemTemplate&gt;<br>&lt;/toolkitinputcontrols:AutoCompleteBox&gt;<br>....<br>&lt;/DataTemplate&gt;&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&lt;toolkitinputcontrols:AutoCompleteBox x:Name=&quot;acSettlement&quot; Grid.Column=&quot;1&quot; Grid.Row=&quot;1&quot; Margin=&quot;2&quot;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;VerticalAlignment=&quot;Center&quot; FilterMode=&quot;StartsWith&quot; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SelectedItem=&quot;{Binding 'SelectedItem.Settlement', Mode=TwoWay}&quot;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ItemsSource=&quot;{Binding 'Settlement.CollectionView'}&quot;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ValueMemberPath=&quot;Name&quot; MinimumPrefixLength=&quot;2&quot; MinimumPopulateDelay=&quot;500&quot;&gt;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;toolkitinputcontrols:AutoCompleteBox.ItemTemplate&gt;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;DataTemplate&gt;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;StackPanel Margin=&quot;2&quot;&gt;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;TextBlock Text=&quot;{Binding 'Name', Mode=OneWay}&quot; FontWeight=&quot;Bold&quot;/&gt;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;TextBlock Text=&quot;{Binding 'StateProvince.Name', Mode=OneWay}&quot; Margin=&quot;8,0,0,0&quot;/&gt;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;TextBlock Text=&quot;{Binding 'StateProvince.Country.IsoName', Mode=OneWay, Converter={coreconverters:CultureStringDisplayNameConverter}}&quot; Margin=&quot;16,0,0,0&quot;/&gt;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/StackPanel&gt;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/DataTemplate&gt;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/toolkitinputcontrols:AutoCompleteBox.ItemTemplate&gt;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&lt;/toolkitinputcontrols:AutoCompleteBox&gt;</div>\r\n<p>It works very well but when I change the current view template (for example, an user navigates to the address view, and go back), then the AutoCompleteBox displays the type name instead of the Name property. This is the view template selector:</p>\r\n<p>&lt;ContentPresenter<br>&nbsp;&nbsp; &nbsp; &nbsp; Content=&quot;{Binding 'Current', Mode=OneWay}&quot;<br>&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;ContentTemplateSelector=&quot;{Binding Mode=OneWay, Source={StaticResource vtsOrganization}}&quot;/&gt;&nbsp;<br><br>Step by step:<br><br>1. An user selects the location menu item. She/He can see a settlement name, for example: &quot;Los Angeles&quot;. Our hero adds, edits, deletes items (ListBox + Details /AutoCompleteBox/)...<br>2. She/he navigates to a new view (template) using the menu items (general view, address view, etc.). &nbsp;Our hero adds, edits, deletes items...<br>3. She/he goes back to the location view.<br>4. The AutoCompleteBox displays the selected settlement's type name instead of the Name property. It forgets to display the ValueMemberPath.<br>&nbsp;&nbsp; &nbsp;But here is the trick. When I select a new item (settlement) in the listbox and go back to the previous item, it works very well again. The AutoCompleteBox displays the &quot;Name&quot; property again.<br>&nbsp;&nbsp; &nbsp;This is some update bug???&nbsp;</p>\r\n<p>+ When I load settlements, I have to use the Input priority:<br><br>DispatcherUtility.DoDispatch(() =&gt;<br>{<br>&nbsp;&nbsp; &nbsp; CollectionView.MoveCurrentToFirst();<br>},<br>DispatcherPriority.Input);<br>&nbsp;<br>If I use normal priority, then the same problem occures. This is the end of an open command&nbsp;in the viewmodel. There is a workaround:</p>\r\n<p>DispatcherUtility.DoDispatch(() =&gt;<br>{<br>&nbsp;&nbsp; &nbsp; var prev = this.SelectedItem;<br>&nbsp;&nbsp; &nbsp; this.SelectedItem = null;<br>&nbsp;&nbsp; &nbsp; this.SelectedItem = prev;<br>},<br>DispatcherPriority.Input);&nbsp;<br><br>If I do it, then the AutoCompleteBox also works fine. Otherwise, other controls work very well without it.</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2010-04-12T04:12:06.777-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "430769",
    "ThreadId": "209031",
    "Html": "<p>There is a workaround:<br>I must overwrite the ToString() method of all EF entities. But it is not a good thing. Please, fix this bug.<br>The AutoCompleteBox doesn't display the specified property of the selected object after loading.<br>Instead of a property value (for example, &quot;Name&quot;),&nbsp;I can see the ToString() value.</p>",
    "PostedDate": "2010-04-13T23:06:20.497-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]