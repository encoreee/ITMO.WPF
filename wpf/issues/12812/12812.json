{
  "WorkItem": {
    "AffectedComponent": {
      "Name": "",
      "DisplayName": ""
    },
    "ClosedComment": "",
    "ClosedDate": null,
    "CommentCount": 0,
    "Custom": null,
    "Description": "I'm getting such error when I change DataContext of the Accordion:\n \nObject reference not set to an instance of an object.\n   at System.Windows.Controls.ItemContainerGenerator.ContainerFromIndex(Int32 index)\n   at System.Windows.Controls.Accordion.UnselectItem(Int32 index, Object item) in C:\\dd\\WPF_1\\src\\wpf\\src\\ControlsPack\\WPFToolkit\\Layout\\Accordion\\System\\Windows\\Controls\\Accordion.cs:line 1165\n   at System.Windows.Controls.Accordion.OnAccordionItemUnselected(AccordionItem accordionItem) in C:\\dd\\WPF_1\\src\\wpf\\src\\ControlsPack\\WPFToolkit\\Layout\\Accordion\\System\\Windows\\Controls\\Accordion.cs:line 1148\n   at System.Windows.Controls.AccordionItem.OnIsSelectedPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e) in C:\\dd\\WPF_1\\src\\wpf\\src\\ControlsPack\\WPFToolkit\\Layout\\Accordion\\System\\Windows\\Controls\\AccordionItem.cs:line 329\n   at System.Windows.DependencyObject.OnPropertyChanged(DependencyPropertyChangedEventArgs e)\n   at System.Windows.FrameworkElement.OnPropertyChanged(DependencyPropertyChangedEventArgs e)\n   at System.Windows.DependencyObject.NotifyPropertyChange(DependencyPropertyChangedEventArgs args)\n   at System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, OperationType operationType)\n  ........\n------------------------------------------------------------------------------------\nMainWindow.cs:\n \npublic partial class MainWindow : Window\n    {\n        public MainWindow()\n        {\n            InitializeComponent();\n        }\n \n        private void Button_Click(object sender, RoutedEventArgs e)\n        {\n            uxAccordion.DataContext = new List<DataSItem>()\n                                          {new DataSItem() {Text = \"ibm\"}, new DataSItem() {Text = \"mazafaka\"}};\n        }\n    }\n \n    public class DataSItem\n    {\n        public string Text { get; set; }\n    }\n-------------------------------------------------------------------------------------------------------\nMainWindow.xaml:\n \n<Window x:Class=\"WpfApplication2.MainWindow\"\n        xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\n        xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"\n        xmlns:Controls=\"clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Layout.Toolkit\"\n        Title=\"MainWindow\" Height=\"350\" Width=\"525\">\n    <StackPanel>\n        <Button Click=\"Button_Click\" Content=\"Set DS\"></Button>\n        <Controls:Accordion x:Name=\"uxAccordion\" ItemsSource=\"{Binding}\">\n            <Controls:Accordion.ContentTemplate>\n                <DataTemplate>\n                    <TextBlock Text=\"{Binding Text}\"/>\n                </DataTemplate>\n            </Controls:Accordion.ContentTemplate>\n        </Controls:Accordion>\n    </StackPanel>\n</Window>\n \n------------------------------------------------------------------------------------------------------\nYou can also look at attached test solution. Click on the button twice.",
    "LastUpdatedDate": "2013-02-21T18:40:38.163-08:00",
    "PlannedForRelease": "",
    "ReleaseVisibleToPublic": false,
    "Priority": {
      "Name": "Low",
      "Severity": 50,
      "Id": 1
    },
    "ProjectName": "wpf",
    "ReportedDate": "2010-04-20T13:08:09.147-07:00",
    "Status": {
      "Name": "Proposed",
      "Id": 1
    },
    "ReasonClosed": {
      "Name": "Unassigned"
    },
    "Summary": "Accordion is crashed if DataContext is changed",
    "Type": {
      "Name": "Issue",
      "Id": 3
    },
    "VoteCount": 4,
    "Id": 12812
  },
  "FileAttachments": [
    {
      "FileId": 4238,
      "FileName": "WpfApplication2.zip",
      "DownloadUrl": ".\\4238"
    }
  ],
  "Comments": [
    {
      "Message": "I'm getting exactly the same error. In my case the accordion control is inside a datatemplate that is bound to a viewmodel. When a different viewmodel is selected the \"current\" viewmodel's UI is discarded and that's when this exception manifests itself. ",
      "PostedDate": "2010-05-05T00:49:19.823-07:00",
      "Id": -2147483648
    },
    {
      "Message": "",
      "PostedDate": "2010-08-27T02:12:57.827-07:00",
      "Id": -2147483648
    },
    {
      "Message": "I'm getting the same error as well, when I use the page control. It's totally understandable why this happens. Can anyone recommend a fix?",
      "PostedDate": "2010-12-29T20:26:01.053-08:00",
      "Id": -2147483648
    },
    {
      "Message": "Ok so I found an interim solution to my problem. It involves modifying the code:\r\n\r\nprotected override void ClearContainerForItemOverride(DependencyObject element, object item)\r\n        {\r\n            AccordionItem accordionItem = element as AccordionItem;\r\n            if (accordionItem != null)\r\n            {\r\n                accordionItem.IsLocked = false;\r\n                //accordionItem.IsSelected = false; <- This line was commented out\r\n\r\n                // release the parent child relationship.\r\n                accordionItem.ParentAccordion = null;\r\n            }\r\n            base.ClearContainerForItemOverride(element, item);\r\n        }",
      "PostedDate": "2010-12-29T21:53:46.133-08:00",
      "Id": -2147483648
    },
    {
      "Message": "",
      "PostedDate": "2011-09-08T13:52:38.3-07:00",
      "Id": -2147483648
    },
    {
      "Message": "Running into the same error",
      "PostedDate": "2011-09-08T14:34:00.613-07:00",
      "Id": -2147483648
    },
    {
      "Message": "",
      "PostedDate": "2013-02-21T18:40:38.163-08:00",
      "Id": -2147483648
    }
  ]
}